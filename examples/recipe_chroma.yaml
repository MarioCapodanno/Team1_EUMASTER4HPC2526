configuration:
  target: "meluxina"

service:
  name: "chroma-vectordb"
  image: "chromadb/chroma:latest"
  command: "chroma run --host 0.0.0.0 --port 8000"
  partition: "cpu"
  num_gpus: 0
  time_limit: "03:00:00"
  port: 8000

client:
  command: "python3 -c 'import chromadb; import time; import os; import numpy as np; url=os.environ.get(\"SERVICE_URL\"); hostname, port = url.replace(\"http://\", \"\").split(\":\") if url else (\"localhost\", 8000); client = chromadb.HttpClient(host=hostname, port=int(port)); collection = client.create_collection(\"test_collection\"); start=time.time(); collection.add(embeddings=[[1.1, 2.2, 3.3]], ids=[\"id1\"]); print(f\"Insert Latency: {time.time()-start:.4f}s\")'"
  partition: "cpu"
  num_gpus: 0
  time_limit: "00:30:00"

benchmarks:
  num_clients: 8
  metrics: ["insert_latency", "query_latency", "similarity_accuracy"]
